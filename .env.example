# AUTO ANI Website - Environment Variables Template 
# Copy this file to .env.local and fill in the actual values
#
# ============================================
# SECURITY WARNING - READ CAREFULLY
# ============================================
#
# DO NOT commit .env or .env.local files to version control
# DO NOT share your API keys or secrets with anyone
# DO NOT use test/development keys in production
# DO NOT hardcode secrets in your application code
#
# ALWAYS use strong, randomly generated secrets:
#   - NEXTAUTH_SECRET: openssl rand -base64 32
#   - JWT_SECRET: openssl rand -base64 32
#   - ENCRYPTION_KEY: openssl rand -base64 32
#   - WEBHOOK_SECRET: openssl rand -hex 32
#
# ALWAYS rotate secrets regularly (every 90 days recommended)
# ALWAYS use different secrets for development and production
# ALWAYS enable 2FA on all service provider accounts (Stripe, Twilio, etc)
#
# ============================================

# ============================================
# DATABASE CONFIGURATION
# ============================================

# Database Provider: sqlite (dev) or postgresql (prod)
DATABASE_PROVIDER="sqlite"  # Change to "postgresql" for production

# SQLite Configuration (Development)
# Use absolute path for SQLite database file
DATABASE_URL="file:/home/behar/auto-ani-website/prisma/dev.db"

# PostgreSQL Configuration (Production)
# Connection pooling URL (use with PgBouncer, Supabase Pooler, or similar)
# DATABASE_URL="postgresql://username:password@host:6543/auto_ani_db?pgbouncer=true"

# Direct database connection (for migrations and long-running operations)
# DIRECT_DATABASE_URL="postgresql://username:password@host:5432/auto_ani_db"

# Shadow database for migrations (optional, for production)
# SHADOW_DATABASE_URL="postgresql://username:password@host:5432/auto_ani_db_shadow"

# Example PostgreSQL URLs for different providers:
# Local PostgreSQL: "postgresql://postgres:password@localhost:5432/auto_ani_db"
# Supabase: "postgresql://postgres.[project-ref]:[password]@aws-0-[region].pooler.supabase.com:6543/postgres?pgbouncer=true"
# Railway: "postgresql://postgres:[password]@[host].railway.app:5432/railway"
# Heroku: "postgres://[username]:[password]@[host].compute.amazonaws.com:5432/[database]"
# Neon: "postgresql://[username]:[password]@[host].neon.tech/[database]?sslmode=require"
# DigitalOcean: "postgresql://doadmin:[password]@[host]:25060/defaultdb?sslmode=require"

# Connection Pool Configuration (PostgreSQL only)
DATABASE_POOL_SIZE="20"                      # Max connections in pool
DATABASE_CONNECT_TIMEOUT="5000"              # Connection timeout (ms)
DATABASE_QUERY_TIMEOUT="10000"               # Query timeout (ms)
DATABASE_POOL_TIMEOUT="10000"                # Wait time for free connection (ms)
DATABASE_IDLE_TIMEOUT="60000"                # Close idle connections after (ms)
DATABASE_STATEMENT_TIMEOUT="30000"           # Max query execution time (ms)
DATABASE_HEALTH_CHECK_INTERVAL="30000"       # Health check interval (ms)
DATABASE_POOL_STATS="false"                  # Log pool statistics
DATABASE_DEBUG="false"                       # Enable query logging

# ============================================
# AUTHENTICATION & SESSION MANAGEMENT
# ============================================
# SECURITY: Use strong, random secrets generated with cryptographic tools

# NextAuth.js Configuration
NEXTAUTH_URL="http://localhost:3000"
# CRITICAL: Generate with: openssl rand -base64 32
# This secret is used to encrypt session tokens - NEVER share or commit this!
NEXTAUTH_SECRET="generate-with-openssl-rand-base64-32"

# Email Service (Resend)
RESEND_API_KEY="re_your_resend_api_key_here"
FROM_EMAIL="contact@autosalonani.com"
ADMIN_EMAIL="admin@autosalonani.com"

# Google Analytics
NEXT_PUBLIC_GA_ID="G-XXXXXXXXXX"

# Facebook Pixel
NEXT_PUBLIC_FB_PIXEL_ID="your_facebook_pixel_id"

# Google Maps API
NEXT_PUBLIC_GOOGLE_MAPS_API_KEY="your_google_maps_api_key"

# WhatsApp Business
NEXT_PUBLIC_WHATSAPP_NUMBER="38349204242"
NEXT_PUBLIC_WHATSAPP_MESSAGE="Hello, I'm interested in your vehicles"

# Site URL
NEXT_PUBLIC_SITE_URL="https://autosalonani.com"

# reCAPTCHA Configuration
NEXT_PUBLIC_RECAPTCHA_SITE_KEY="your_recaptcha_site_key"
RECAPTCHA_SECRET_KEY="your_recaptcha_secret_key"

# Image optimization service (Cloudinary)
CLOUDINARY_URL="cloudinary://api_key:api_secret@cloud_name"
CLOUDINARY_API_KEY="your_cloudinary_api_key"
CLOUDINARY_API_SECRET="your_cloudinary_api_secret"
CLOUDINARY_CLOUD_NAME="your_cloudinary_cloud_name"

# Alternative: AWS S3 Configuration
# AWS_S3_BUCKET_NAME="auto-ani-uploads"
# AWS_ACCESS_KEY_ID="your_aws_access_key"
# AWS_SECRET_ACCESS_KEY="your_aws_secret_key"
# AWS_REGION="eu-central-1"

# Facebook Integration (for sync automation)
FACEBOOK_API_KEY="your_facebook_app_id"
FACEBOOK_APP_SECRET="your_facebook_app_secret"
FACEBOOK_PAGE_ACCESS_TOKEN="your_page_access_token"
INSTAGRAM_API_KEY="your_instagram_basic_display_app_id"

# Admin credentials (use strong passwords in production)
ADMIN_EMAIL="admin@autosalonani.com"
ADMIN_PASSWORD_HASH="$2a$12$your_bcrypt_hashed_password_here"

# JWT Secret for authentication
# CRITICAL: Generate with: openssl rand -base64 32
# Minimum 32 characters required for security
JWT_SECRET="your-super-secret-jwt-secret-for-tokens"

# SMS Notifications (Optional - Twilio)
TWILIO_ACCOUNT_SID="your_twilio_account_sid"
TWILIO_AUTH_TOKEN="your_twilio_auth_token"
TWILIO_PHONE_NUMBER="+1234567890"

# ============================================
# MONITORING & ERROR TRACKING
# ============================================

# Sentry Error Tracking and Performance Monitoring
# Get your DSN from: https://sentry.io/settings/projects/
# The DSN is safe to expose publicly (it's in client-side code)
NEXT_PUBLIC_SENTRY_DSN="https://your-public-key@o123456.ingest.sentry.io/123456"
SENTRY_DSN="https://your-public-key@o123456.ingest.sentry.io/123456"

# Sentry Organization and Project (for CI/CD source map uploads)
# CRITICAL: Keep SENTRY_AUTH_TOKEN secret! Never commit to version control
SENTRY_ORG="your-organization-slug"
SENTRY_PROJECT="auto-ani-website"
SENTRY_AUTH_TOKEN="your_sentry_auth_token_from_settings"

# Sentry Release Tracking (optional - auto-generated if not set)
NEXT_PUBLIC_SENTRY_RELEASE="auto-ani@1.0.0"
SENTRY_RELEASE="auto-ani@1.0.0"

# Enable Sentry in development (default: disabled)
NEXT_PUBLIC_SENTRY_DEV_MODE="false"
SENTRY_DEV_MODE="false"

# PostHog Analytics (Product Analytics & Session Replay)
# Get your API key from: https://posthog.com/project/settings
NEXT_PUBLIC_POSTHOG_KEY="phc_your_posthog_project_api_key"
NEXT_PUBLIC_POSTHOG_HOST="https://app.posthog.com"

# Application Version (for tracking)
NEXT_PUBLIC_APP_VERSION="1.0.0"

# Health Check API Key (for detailed health endpoint in production)
HEALTH_CHECK_API_KEY="your-secure-health-check-api-key"

# Log Level (error, warn, info, debug)
LOG_LEVEL="info"

# Rate limiting
RATE_LIMIT_ENABLED="true"
RATE_LIMIT_WINDOW_MS="900000"
RATE_LIMIT_MAX_REQUESTS="100"

# ============================================
# SECURITY CONFIGURATION
# ============================================

# Session Security
# CRITICAL: Generate with: openssl rand -base64 32
SESSION_SECRET="your-session-secret-here"

# Encryption Key for sensitive data
# CRITICAL: Must be exactly 32 characters - Generate with: openssl rand -base64 32
ENCRYPTION_KEY="your-32-character-encryption-key"

# SMTP Configuration (Alternative to Resend)
# SMTP_HOST="smtp.gmail.com"
# SMTP_PORT="587"
# SMTP_USER="your-email@gmail.com"
# SMTP_PASS="your-app-password"

# Environment
NODE_ENV="development"

# Marketing Automation Platform
REDIS_URL="redis://localhost:6379"
REDIS_HOST="localhost"
REDIS_PORT="6379"
REDIS_PASSWORD=""

# Queue Management
QUEUE_CONCURRENCY="10"
QUEUE_MAX_RETRIES="3"

# Marketing Campaign Limits
MAX_EMAIL_BATCH_SIZE="1000"
MAX_SMS_BATCH_SIZE="100"
EMAIL_RATE_LIMIT="100"  # emails per minute
SMS_RATE_LIMIT="20"     # SMS per minute

# A/B Testing
AB_TEST_AUTO_CONCLUDE="true"
AB_TEST_MIN_CONFIDENCE="95"
AB_TEST_MIN_SAMPLE_SIZE="100"

# Analytics
ANALYTICS_RETENTION_DAYS="365"
DAILY_AGGREGATION_ENABLED="true"

# Lead Scoring Weights
LEAD_SCORE_WEBSITE_VISIT="5"
LEAD_SCORE_VEHICLE_VIEW="10"
LEAD_SCORE_INQUIRY="25"
LEAD_SCORE_TEST_DRIVE="40"
LEAD_SCORE_EMAIL_OPEN="3"
LEAD_SCORE_EMAIL_CLICK="8"

# Social Media API Keys
FACEBOOK_APP_ID="your_facebook_app_id"
FACEBOOK_APP_SECRET="your_facebook_app_secret"
FACEBOOK_ACCESS_TOKEN="your_facebook_access_token"
INSTAGRAM_ACCESS_TOKEN="your_instagram_access_token"
TWITTER_BEARER_TOKEN="your_twitter_bearer_token"
LINKEDIN_CLIENT_ID="your_linkedin_client_id"
LINKEDIN_CLIENT_SECRET="your_linkedin_client_secret"

# Webhook Security
# CRITICAL: Generate with: openssl rand -hex 32
# Used to sign and verify webhook payloads - keep this secret!
WEBHOOK_SECRET="your-webhook-secret-for-external-integrations"

# ============================================
# API INTEGRATIONS
# ============================================

# Stripe Payment Processing
# SECURITY WARNING: Never commit these keys to version control!
# Production keys start with sk_live_ and pk_live_
# Test keys start with sk_test_ and pk_test_
# Get keys from: https://dashboard.stripe.com/apikeys
STRIPE_SECRET_KEY="sk_test_your_stripe_secret_key"
STRIPE_PUBLISHABLE_KEY="pk_test_your_stripe_publishable_key"
# Webhook secret from: https://dashboard.stripe.com/webhooks
STRIPE_WEBHOOK_SECRET="whsec_your_stripe_webhook_secret"

# Payment Configuration
PAYMENT_CURRENCY="EUR"
DEPOSIT_PERCENTAGE="10"  # Percentage of vehicle price for deposits
MIN_DEPOSIT_AMOUNT="500"  # Minimum deposit in EUR

# Twilio SMS Integration
# SECURITY WARNING: Keep these credentials secure!
# Enable IP Access Control in Twilio console for additional security
TWILIO_ACCOUNT_SID="your_twilio_account_sid"
TWILIO_AUTH_TOKEN="your_twilio_auth_token"
TWILIO_PHONE_NUMBER="+383XXXXXXXX"  # Your Twilio phone number in E.164 format
SMS_RATE_LIMIT="20"  # SMS per minute

# Google Maps API
GOOGLE_MAPS_API_KEY="your_google_maps_api_key"
DEALERSHIP_ADDRESS="Your Dealership Address, Pristina, Kosovo"
DEALERSHIP_LATITUDE="42.6629"
DEALERSHIP_LONGITUDE="21.1655"

# Facebook/Instagram Social Media Automation
FACEBOOK_APP_ID="your_facebook_app_id"
FACEBOOK_APP_SECRET="your_facebook_app_secret"
FACEBOOK_ACCESS_TOKEN="your_long_lived_page_access_token"
FACEBOOK_PAGE_ID="your_facebook_page_id"
INSTAGRAM_ACCOUNT_ID="your_instagram_business_account_id"

# Social Media Configuration
AUTO_POST_NEW_VEHICLES="true"
POST_SCHEDULE_HOUR="9"  # Hour to post scheduled content (0-23)

# Vehicle Valuation API (Optional - using internal algorithms by default)
# KBB_API_KEY="your_kbb_api_key"  # If you have access to KBB API
# EDMUNDS_API_KEY="your_edmunds_api_key"  # If you have access to Edmunds API
# CARFAX_API_KEY="your_carfax_api_key"  # If you have access to Carfax API

# Admin API Key for secure endpoints
# CRITICAL: Generate with: openssl rand -base64 32
# This key authenticates admin API requests - treat as highly sensitive
ADMIN_API_KEY="your-secure-admin-api-key-generate-with-openssl"

# API Rate Limiting
RATE_LIMIT_ENABLED="true"
RATE_LIMIT_WINDOW_MS="900000"  # 15 minutes
RATE_LIMIT_MAX_REQUESTS="100"

# Webhook Configuration
WEBHOOK_RETRY_ATTEMPTS="3"
WEBHOOK_TIMEOUT_MS="5000"
DISABLE_WEBHOOK_AFTER_FAILURES="10"

# ============================================
# INTEGRATION SETUP INSTRUCTIONS
# ============================================

# STRIPE SETUP:
# 1. Create account at https://stripe.com
# 2. Get API keys from Dashboard > Developers > API keys
# 3. Set up webhook endpoint at Dashboard > Developers > Webhooks
# 4. Add webhook URL: https://yourdomain.com/api/payments/webhook
# 5. Select events: payment_intent.succeeded, payment_intent.payment_failed, checkout.session.completed
# 6. Copy webhook secret to STRIPE_WEBHOOK_SECRET

# TWILIO SETUP:
# 1. Create account at https://twilio.com
# 2. Get Account SID and Auth Token from Console
# 3. Buy a phone number with SMS capabilities
# 4. Set up status callback URL: https://yourdomain.com/api/sms/status-callback
# 5. Verify your sender ID for Kosovo/Serbia if required

# GOOGLE MAPS SETUP:
# 1. Go to https://console.cloud.google.com
# 2. Create new project or select existing
# 3. Enable APIs: Maps JavaScript API, Geocoding API, Distance Matrix API, Directions API
# 4. Create API key in Credentials section
# 5. Restrict API key to your domain for security

# FACEBOOK/INSTAGRAM SETUP:
# 1. Create Facebook App at https://developers.facebook.com
# 2. Add Instagram Basic Display API product
# 3. Get Page Access Token from Graph API Explorer
# 4. Extend token to long-lived (60 days): https://developers.facebook.com/docs/facebook-login/access-tokens
# 5. Get Page ID from Facebook Page settings
# 6. Get Instagram Business Account ID from Instagram settings
# 7. Ensure Facebook Page is connected to Instagram Business Account

# ADMIN API KEY GENERATION:
# Generate secure API key with: openssl rand -base64 32

# ============================================
# DEPLOYMENT PLATFORM CONFIGURATION
# ============================================

# Render Configuration
# RENDER_API_KEY="your_render_api_key"
# RENDER_SERVICE_ID="your_render_service_id"

# Alternative Platforms (if needed)
# Vercel Configuration
# VERCEL_TOKEN="your_vercel_token"
# VERCEL_PROJECT_ID="your_vercel_project_id"
# VERCEL_ORG_ID="your_vercel_org_id"

# Railway Configuration
# RAILWAY_TOKEN="your_railway_token"
# RAILWAY_PROJECT_ID="your_railway_project_id"

# ============================================
# SLACK NOTIFICATIONS (CI/CD Alerts)
# ============================================
SLACK_WEBHOOK_URL="https://hooks.slack.com/services/YOUR/WEBHOOK/URL"
SLACK_SECURITY_WEBHOOK="https://hooks.slack.com/services/YOUR/SECURITY/WEBHOOK"

# ============================================
# BACKUP CONFIGURATION
# ============================================

# AWS S3 for backups (recommended for production)
AWS_ACCESS_KEY_ID="your_aws_access_key"
AWS_SECRET_ACCESS_KEY="your_aws_secret_key"
AWS_REGION="eu-central-1"
BACKUP_BUCKET="auto-ani-backups"

# Backup retention (days)
BACKUP_RETENTION_DAYS="30"

# ============================================
# PERFORMANCE MONITORING
# ============================================

# Enable performance monitoring
ENABLE_PERFORMANCE_MONITORING="true"

# Performance thresholds
PERFORMANCE_THRESHOLD_FCP="1800"  # First Contentful Paint (ms)
PERFORMANCE_THRESHOLD_LCP="2500"  # Largest Contentful Paint (ms)
PERFORMANCE_THRESHOLD_FID="100"   # First Input Delay (ms)
PERFORMANCE_THRESHOLD_CLS="0.1"   # Cumulative Layout Shift

# Bundle size limits
MAX_BUNDLE_SIZE="500000"  # bytes (500KB)
MAX_PAGE_SIZE="200000"    # bytes (200KB)

# ============================================
# PROGRESSIVE WEB APP (PWA) CONFIGURATION
# ============================================

# Enable Service Worker for PWA features
# Set to "true" to enable offline functionality, caching, and app-like experience
# IMPORTANT: Service Worker is disabled by default to prevent page load issues
# See SERVICE_WORKER_README.md for detailed documentation
NEXT_PUBLIC_ENABLE_SW="false"

# Push Notifications (for PWA)
# VAPID keys for Web Push Notifications
# Generate with: npx web-push generate-vapid-keys
NEXT_PUBLIC_VAPID_PUBLIC_KEY="your_vapid_public_key"
VAPID_PRIVATE_KEY="your_vapid_private_key"
VAPID_SUBJECT="mailto:admin@autosalonani.com"

# PWA Configuration
PWA_SHORT_NAME="AUTO ANI"
PWA_NAME="AUTO ANI - Auto Salon"
PWA_DESCRIPTION="Kosovo's Premier Auto Dealership"
PWA_THEME_COLOR="#FF6B35"
PWA_BACKGROUND_COLOR="#FFFFFF"
