# AUTO ANI Website - Production Environment Template
# Copy this file to .env.production and fill in the actual production values
#
# ============================================
# CRITICAL PRODUCTION SECURITY REQUIREMENTS
# ============================================
#
# 1. Use STRONG, UNIQUE secrets for each environment
# 2. NEVER use development/test keys in production
# 3. Enable 2FA on all service provider accounts
# 4. Use managed secrets storage (AWS Secrets Manager, HashiCorp Vault, etc.)
# 5. Rotate secrets every 90 days
# 6. Use connection pooling for database (PgBouncer, Prisma Accelerate)
# 7. Enable SSL/TLS for all connections
# 8. Set up monitoring alerts for security events
#
# ============================================

# Environment
NODE_ENV="production"

# ============================================
# DATABASE CONFIGURATION (PRODUCTION)
# ============================================

# REQUIRED: Use PostgreSQL in production (not SQLite)
DATABASE_PROVIDER="postgresql"

# Connection pooling URL (REQUIRED for production)
# Use PgBouncer, Supabase Pooler, or similar for connection pooling
# This prevents connection exhaustion under load
DATABASE_URL="postgresql://username:password@host:6543/auto_ani_db?pgbouncer=true&connection_limit=20"

# Direct database URL (for migrations only)
DIRECT_DATABASE_URL="postgresql://username:password@host:5432/auto_ani_db"

# Database Connection Pool Settings
DATABASE_POOL_SIZE="20"
DATABASE_CONNECT_TIMEOUT="5000"
DATABASE_QUERY_TIMEOUT="10000"
DATABASE_POOL_TIMEOUT="10000"
DATABASE_IDLE_TIMEOUT="60000"
DATABASE_STATEMENT_TIMEOUT="30000"

# ============================================
# AUTHENTICATION & SESSION (PRODUCTION)
# ============================================

# Application URL (must match production domain)
NEXTAUTH_URL="https://autosalonani.com"
NEXT_PUBLIC_SITE_URL="https://autosalonani.com"
NEXT_PUBLIC_APP_URL="https://autosalonani.com"

# CRITICAL: Generate with: openssl rand -base64 32
# Must be at least 32 characters
NEXTAUTH_SECRET="GENERATE_UNIQUE_SECRET_FOR_PRODUCTION"

# JWT Secret (CRITICAL: Generate with: openssl rand -base64 32)
JWT_SECRET="GENERATE_UNIQUE_JWT_SECRET_FOR_PRODUCTION"

# Session Secret (CRITICAL: Generate with: openssl rand -base64 32)
SESSION_SECRET="GENERATE_UNIQUE_SESSION_SECRET_FOR_PRODUCTION"

# Encryption Key (CRITICAL: Must be exactly 32 characters)
ENCRYPTION_KEY="GENERATE_32_CHAR_ENCRYPTION_KEY"

# ============================================
# REDIS (REQUIRED FOR PRODUCTION)
# ============================================

# Redis connection URL
# Use managed Redis service (Upstash, Redis Cloud, AWS ElastiCache)
REDIS_URL="rediss://default:password@your-redis-host:6379"
REDIS_HOST="your-redis-host.com"
REDIS_PORT="6379"
REDIS_PASSWORD="your-redis-password"
REDIS_TLS="true"

# ============================================
# MONITORING & ERROR TRACKING (REQUIRED)
# ============================================

# Sentry (REQUIRED for production error tracking)
NEXT_PUBLIC_SENTRY_DSN="https://your-public-key@o123456.ingest.sentry.io/123456"
SENTRY_DSN="https://your-public-key@o123456.ingest.sentry.io/123456"
SENTRY_ORG="your-organization-slug"
SENTRY_PROJECT="auto-ani-website"
SENTRY_AUTH_TOKEN="your_sentry_auth_token"
NEXT_PUBLIC_SENTRY_RELEASE="auto-ani@1.0.0"

# PostHog Analytics (REQUIRED for user analytics)
NEXT_PUBLIC_POSTHOG_KEY="phc_your_posthog_key"
NEXT_PUBLIC_POSTHOG_HOST="https://app.posthog.com"

# Application Version
NEXT_PUBLIC_APP_VERSION="1.0.0"

# Health Check Protection
HEALTH_CHECK_API_KEY="GENERATE_WITH_OPENSSL_RAND"

# Logging Configuration
LOG_LEVEL="warn"  # Production should use warn or error

# ============================================
# EMAIL SERVICE (REQUIRED)
# ============================================

# Resend API (Recommended for production)
RESEND_API_KEY="re_LIVE_YOUR_PRODUCTION_API_KEY"
FROM_EMAIL="noreply@autosalonani.com"
ADMIN_EMAIL="admin@autosalonani.com"

# ============================================
# PAYMENT PROCESSING (PRODUCTION KEYS)
# ============================================

# Stripe Production Keys
# WARNING: Use LIVE keys (sk_live_, pk_live_) not test keys
STRIPE_SECRET_KEY="sk_live_YOUR_PRODUCTION_SECRET_KEY"
STRIPE_PUBLISHABLE_KEY="pk_live_YOUR_PRODUCTION_PUBLISHABLE_KEY"
STRIPE_WEBHOOK_SECRET="whsec_YOUR_PRODUCTION_WEBHOOK_SECRET"

# Payment Configuration
PAYMENT_CURRENCY="EUR"
DEPOSIT_PERCENTAGE="10"
MIN_DEPOSIT_AMOUNT="500"

# ============================================
# SMS SERVICE (PRODUCTION)
# ============================================

# Twilio Production Credentials
TWILIO_ACCOUNT_SID="your_production_account_sid"
TWILIO_AUTH_TOKEN="your_production_auth_token"
TWILIO_PHONE_NUMBER="+383XXXXXXXX"
SMS_RATE_LIMIT="20"

# ============================================
# API INTEGRATIONS (PRODUCTION)
# ============================================

# Google Services
GOOGLE_MAPS_API_KEY="YOUR_PRODUCTION_GOOGLE_MAPS_KEY"
NEXT_PUBLIC_GOOGLE_MAPS_API_KEY="YOUR_PRODUCTION_GOOGLE_MAPS_KEY"
NEXT_PUBLIC_GA_ID="G-PRODUCTION-ID"

# Facebook & Instagram Production Keys
FACEBOOK_APP_ID="your_production_app_id"
FACEBOOK_APP_SECRET="your_production_app_secret"
FACEBOOK_ACCESS_TOKEN="your_production_long_lived_token"
FACEBOOK_PAGE_ID="your_production_page_id"
INSTAGRAM_ACCOUNT_ID="your_production_instagram_id"
NEXT_PUBLIC_FB_PIXEL_ID="your_production_pixel_id"

# ============================================
# SECURITY CONFIGURATION
# ============================================

# Rate Limiting (CRITICAL for production)
RATE_LIMIT_ENABLED="true"
RATE_LIMIT_WINDOW_MS="900000"
RATE_LIMIT_MAX_REQUESTS="100"

# CORS Configuration (restrict to your domain)
ALLOWED_ORIGINS="https://autosalonani.com,https://www.autosalonani.com"

# Webhook Security (CRITICAL: Generate with: openssl rand -hex 32)
WEBHOOK_SECRET="GENERATE_UNIQUE_WEBHOOK_SECRET"

# Admin API Key (CRITICAL: Generate with: openssl rand -base64 32)
ADMIN_API_KEY="GENERATE_UNIQUE_ADMIN_KEY"

# reCAPTCHA (protect forms from spam)
NEXT_PUBLIC_RECAPTCHA_SITE_KEY="your_production_site_key"
RECAPTCHA_SECRET_KEY="your_production_secret_key"

# ============================================
# DEPLOYMENT PLATFORM SECRETS
# ============================================

# Netlify
NETLIFY_AUTH_TOKEN="your_production_netlify_token"
NETLIFY_SITE_ID="your_production_site_id"

# CI/CD Notifications
SLACK_WEBHOOK_URL="https://hooks.slack.com/services/YOUR/PROD/WEBHOOK"
SLACK_SECURITY_WEBHOOK="https://hooks.slack.com/services/YOUR/SECURITY/WEBHOOK"

# ============================================
# BACKUP & DISASTER RECOVERY
# ============================================

# AWS S3 Backup Storage
AWS_ACCESS_KEY_ID="your_production_aws_key"
AWS_SECRET_ACCESS_KEY="your_production_aws_secret"
AWS_REGION="eu-central-1"
BACKUP_BUCKET="auto-ani-production-backups"
BACKUP_RETENTION_DAYS="90"

# ============================================
# PERFORMANCE & OPTIMIZATION
# ============================================

# Image Optimization
CLOUDINARY_URL="cloudinary://key:secret@production_cloud_name"
CLOUDINARY_API_KEY="your_production_api_key"
CLOUDINARY_API_SECRET="your_production_api_secret"
CLOUDINARY_CLOUD_NAME="your_production_cloud_name"

# Performance Monitoring
ENABLE_PERFORMANCE_MONITORING="true"
PERFORMANCE_THRESHOLD_FCP="1800"
PERFORMANCE_THRESHOLD_LCP="2500"
PERFORMANCE_THRESHOLD_FID="100"
PERFORMANCE_THRESHOLD_CLS="0.1"

# ============================================
# MARKETING & ANALYTICS
# ============================================

# Queue Configuration
QUEUE_CONCURRENCY="10"
QUEUE_MAX_RETRIES="3"
MAX_EMAIL_BATCH_SIZE="1000"
MAX_SMS_BATCH_SIZE="100"
EMAIL_RATE_LIMIT="100"
SMS_RATE_LIMIT="20"

# A/B Testing
AB_TEST_AUTO_CONCLUDE="true"
AB_TEST_MIN_CONFIDENCE="95"
AB_TEST_MIN_SAMPLE_SIZE="100"

# Analytics
ANALYTICS_RETENTION_DAYS="365"
DAILY_AGGREGATION_ENABLED="true"

# ============================================
# FEATURE FLAGS
# ============================================

# Social Media Auto-Posting
AUTO_POST_NEW_VEHICLES="true"
POST_SCHEDULE_HOUR="9"

# ============================================
# PRODUCTION DEPLOYMENT CHECKLIST
# ============================================
#
# Before deploying to production, ensure:
#
# [ ] All secrets are generated with cryptographic tools
# [ ] Database is PostgreSQL with connection pooling
# [ ] Redis is configured (managed service recommended)
# [ ] Sentry DSN and auth token are set
# [ ] Stripe LIVE keys are configured (not test keys)
# [ ] Email service is configured and tested
# [ ] SSL certificate is valid
# [ ] DNS is properly configured
# [ ] CDN is configured (if using)
# [ ] Backup strategy is tested
# [ ] Monitoring alerts are configured
# [ ] Rate limiting is enabled
# [ ] Security headers are configured
# [ ] All API keys are production-level
# [ ] 2FA is enabled on all service accounts
# [ ] Database migrations have been tested in staging
# [ ] Load testing has been performed
# [ ] Disaster recovery plan is documented
#
# ============================================